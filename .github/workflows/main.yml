name: Build & Publish Release APK
on:
  push:
    branches:
      - main
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      -  uses: actions/setup-java@v1
         with:
          java-version: "12.x"

      - uses: subosito/flutter-action@v1
        with:
          flutter-version: "2.19.2"
          channel: 'stable'


      - run: flutter pub get
      - run: flutter build apk

      - uses: actions/upload-artifact@v2
        with:
          name: release-apk
          path: pixabay_app/pixabay_app/build/app/outputs/flutter-apk/release-apk.apk



#on:\
#  push:
#    branches:
#      - main
#
#name: Build & Publish Release APK
#jobs:
#  build:
#    name: build and release new apk
#    runs-on: ubuntu-latest
#    steps:
#      - name: checkout code
#        uses: actions/checkout@v3
#      - name: setup jdk
#        uses: actions/setup-java@v2
#        with:
#          distribution: 'zulu'
#          java-version: 11
#
##      - name: Releasing using Hub
##        uses: krishna/release-apk@main
##        env:
##          GITHUB_TOKEN: ${{ secrets.token }}
##          APP_FOLDER: app
#
#      - uses: subosito/flutter-action@v2
#        with:
#          channel: 'stable'
#      - run: flutter pub get
#      - run: flutter build apk --release --split-per-abi
#
#      - name: push to Releases
#        uses: ncipollo/release-action@v1
#        with:
#          artifacts: "build/app/outputs/apk/release/*"
#          tag: v0.0.1
#          token: ${{ secerets.token}}